# logDC

**声明性部署**啥意思

## 1. introduction

1. 主流云平台声称可以提供自动化、可伸缩性、敏捷性和易于使用，以实现应用程序的业务目标。为了利用这些云功能，开发人员需要描述所需的应用程序结构和状态
2. 管理和操作这样的云操作会从声明式部署中获得额外的复杂性；在开发阶段编码较少通常意味着在运行阶段会出现更多的麻烦；由于更加分布式和复杂，使得我们很难找到云中失败的根本原因，因为很多动态因素会掩盖掉真正的原因
3. **使用历史日志生成一个操作的特定形式来建造一个“相关模型”来代表正常操作，当系统出错时，操作人员就可以将收集到的失败操作和“相关模型”对比，基于当前日志与“相关模型”的偏差推断问题所在**
4. 尽管已经有很多研究了，但是还是需要不停的适应不断变换的云平台：
   1. 云平台从资源导向变为应用导向，**不能设计专门为一个应用程序服务的日志参照模型，而应该去推广构造日志参照模型的方法**（授人以鱼不如授人以渔）
   2. 应用程序的行为具有更多的多样性和动态性，日志参考模型必须有效捕获这些行为，并且要拓展到应用程序的整个生命周期。
5. 所以，方法和系统要重新设计，LogDC的动机是在分布式应用程序之前繁琐和困难的故障排除过程中提供直观的“比较和发现”经验。
6. 参考模型低触摸，机器学习多方面利用
7. 作用：
   1. 为一类应用程序构建参考模型
   2. 通过应用程序的生命周期来识别正常的行为
8. 应用分类：构造新方法（没说先）设计了从应用程序的部署声明中提取特征的新方法，并基于其训练分类器。
9. 模型构造：基于在一个稳定的云平台中，大多数部署的工作负载都处于它们所期望的状态为前提，并基于聚类算法收集正常的样本
10. 然后拿实例测了测真的可行，还很好，各个方面的错误都能检测到

## 2.相关工作

3种模型：基于日志数量的模型，基于模板数量的模型，基于状态转换的模式

- 基于日志数量的模型：计算日志数量，突然增多代表错误，适用于线上场景，太直接了不适用于复杂的云架构
- 基于模板数量的模型：通常计算一个时间窗口中不同模板的数量，并为每个时间窗口设置一个向量。然后利用机器学习算法等方法来区分异常值，实现简单但不能为问题识别和诊断提供帮助
- 状态过渡模型：就是上文所描述的本文的方法

优点：

- 它可以诊断深深隐藏在日志序列中的问题
- 可以为工程师提供有关问题的上下文日志消息
- 它可以为工程师提供正确的日志序列，并告诉工程师应该发生了什么

对于日志问题识别，之前提出过很多方法，所有方法都没有采用部署信息来帮助问题诊断。

LogDC包括五个模块，即数据爬虫、部署分类、模型构建器、日志处理和异常定位。数据爬虫负责收集历史部署yaml文件和运行时日志。使用收集到的部署yaml文件，部署分类模块提取这些部署的文本特性，并为每种类型的部署构建一个分类模型。同时，日志处理模块编织由不同K8S组件生成的日志条目，构建日志模板，并提取日志特征。给定日志特性和声明类，模型构建器将为每一类部署训练一个参考模型。然后，异常定位模块用相应的参考模型对新收集的对数数据进行异常定位。最终的输出是可疑的声明性原语或日志项。