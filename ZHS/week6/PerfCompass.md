# PerfCompass: Toward Runtime Performance Anomaly Fault Localization for Infrastructure-as-a-Service Clouds

## 简介
PerfCompass,一个轻量级的运行时性能异常定位工具

通过工具直接收集内核级别的系统调用日志

多进程、多线程

主要用于判断故障出现在程序内部还是程序外部

## 系统设计
### 故障起始时间识别
观察到,如果故障导致应用性能下降,那么系统调用的执行时间也会变长.

计算系统调用的平均执行时间,从而检测故障是否影响到了执行单元.

如果执行单元被故障所影响,则记录为 故障起始时间 (fault onset time)指标,用于量化故障影响该单元的速度.

计算方式:第一个受影响的系统调用事件戳 - 执行单元启动事件戳

### 故障定位方案
基于两种故障特征的提取与分析
#### 提取故障影响特征来推断该故障是否有全局影响(反之局部)
定义一个指标: 故障影响因子 用于计算被故障直接影响的线程半分比
如果一个线程包含多个执行单元,则只考虑第一个被故障影响执行单元的故障起始时间
如果故障起始时间比一个预定义的阈值小,则称该线程被故障直接影响
如果故障影响因子接近100%,那么可以推断出故障是外部故障；反之,如果显著小于100%,则推断出故障为内部故障.
如果处于分界值,则提取 故障起始时间扩散 指标,来识别故障影响不同线程的时间段是否相同.由于一个外部故障会统一影响这些运行线程,故可以通过计算故障起始时间标准差来判断:若标准差小,则判断为外部故障,反之为内部故障,阈值为1s(实验得出)

